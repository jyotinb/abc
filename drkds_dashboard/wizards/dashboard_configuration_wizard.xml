<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_drkds_dashboard_config_wizard" model="ir.ui.view">
        <field name="name">drkds.dashboard.config.wizard.form</field>
        <field name="model">drkds.dashboard.config.wizard</field>
        <field name="arch" type="xml">
            <form string="Dashboard Configuration Wizard">
                <header>
                    <button name="action_create_configuration" 
                            type="object" 
                            string="Create Configuration" 
                            class="oe_highlight"/>
                    <button special="cancel" string="Cancel" class="oe_secondary"/>
                </header>
                
                <sheet>
                    <group>
                        <field name="configuration_mode" widget="radio"/>
                    </group>
                    
                    <!-- Metric Configuration -->
                    <group string="Metric Configuration" 
                           attrs="{'invisible': [('configuration_mode', '!=', 'metric')]}">
                        <group>
                            <field name="metric_name"/>
                            <field name="metric_model"/>
                            <field name="metric_type"/>
                            <field name="metric_field" 
                                   attrs="{'invisible': [('metric_type', 'in', ['count', 'custom'])], 
                                           'required': [('metric_type', 'in', ['sum', 'avg', 'min', 'max'])]}"/>
                        </group>
                        <group>
                            <field name="metric_domain"/>
                            <field name="metric_python_code" 
                                   attrs="{'invisible': [('metric_type', '!=', 'custom')]}"/>
                        </group>
                    </group>
                    
                    <!-- Filter Configuration -->
                    <group string="Filter Configuration" 
                           attrs="{'invisible': [('configuration_mode', '!=', 'filter')]}">
                        <group>
                            <field name="filter_name"/>
                            <field name="filter_model"/>
                            <field name="filter_type"/>
                        </group>
                        <group>
                            <field name="filter_domain"/>
                            <field name="filter_metadata"/>
                        </group>
                    </group>
                    
                    <!-- Template Configuration -->
                    <group string="Template Configuration" 
                           attrs="{'invisible': [('configuration_mode', '!=', 'template')]}">
                        <group>
                            <field name="template_name"/>
                            <field name="template_metrics"/>
                            <field name="template_filters"/>
                        </group>
                        <group>
                            <field name="template_layout"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_open_drkds_dashboard_config_wizard" model="ir.actions.act_window">
        <field name="name">Dashboard Configuration</field>
        <field name="res_model">drkds.dashboard.config.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <menuitem 
        id="menu_drkds_dashboard_config_wizard" 
        name="Dashboard Configuration" 
        parent="base.menu_custom" 
        action="action_open_drkds_dashboard_config_wizard"
        sequence="100"/>
</odoo>