<?xml version="1.0" encoding="utf-8"?>
<!-- File: PL/2909/green2/wizard/bulk_pipe_assignment_wizard_views.xml -->
<!-- VERSION WITHOUT ANY VIEW INHERITANCE - Just the wizard itself -->
<odoo>
    <!-- Bulk Pipe Assignment Wizard Form View -->
    <record id="view_bulk_pipe_assignment_wizard_form" model="ir.ui.view">
        <field name="name">bulk.pipe.assignment.wizard.form</field>
        <field name="model">bulk.pipe.assignment.wizard</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <!-- Header with statistics -->
                    <div class="alert alert-info" role="alert">
                        <h4 class="alert-heading">ðŸ”§ Bulk Pipe Assignment Tool</h4>
                        <p>Assign pipes to multiple unassigned components at once. Select components below and choose a pipe to assign.</p>
                        <hr/>
                        <div class="row">
                            <div class="col-4">
                                <strong>Total Unassigned:</strong> <field name="total_unassigned" readonly="1" class="oe_inline"/>
                            </div>
                            <div class="col-4">
                                <strong>Selected:</strong> <field name="selected_count" readonly="1" class="oe_inline"/>
                            </div>
                            <div class="col-4">
                                <strong>Est. Cost:</strong> <field name="estimated_cost" readonly="1" widget="monetary" class="oe_inline"/>
                            </div>
                        </div>
                    </div>
                    
                    <group>
                        <!-- Hidden field for project -->
                        <field name="green_master_id" invisible="1"/>
                        
                        <!-- Pipe Selection Section -->
                        <group string="Pipe Selection" colspan="4">
                            <field name="pipe_id" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="pipe_display_info" readonly="1" widget="text" nolabel="1" colspan="2"/>
                        </group>
                    </group>
                    
                    <!-- Filtering Options -->
                    <group string="Filter Options" colspan="4">
                        <group>
                            <field name="filter_by_section" widget="boolean_toggle"/>
                            <field name="section_filter" invisible="not filter_by_section"/>
                        </group>
                        <group>
                            <field name="filter_by_name_pattern" widget="boolean_toggle"/>
                            <field name="name_pattern" invisible="not filter_by_name_pattern" 
                                   placeholder="e.g., 'Column' or 'Arch'"/>
                        </group>
                    </group>
                    
                    <!-- Quick Actions -->
                    <div class="text-center mb-3">
                        <button name="action_select_all_unassigned" 
                                string="âœ“ Select All Unassigned" 
                                type="object" 
                                class="btn-primary"/>
                        <button name="action_clear_selection" 
                                string="âœ— Clear Selection" 
                                type="object" 
                                class="btn-warning"/>
                        <button name="action_preview_assignment" 
                                string="ðŸ‘ï¸ Preview Selected" 
                                type="object" 
                                class="btn-info"/>
                    </div>
                    
                    <!-- Component Selection -->
                    <separator string="Select Components to Assign"/>
                    <field name="component_line_ids" nolabel="1">
                        <tree decoration-info="section=='asc'" 
                              decoration-success="section=='frame'" 
                              decoration-primary="section=='truss'"
                              decoration-warning="section=='lower'"
                              decoration-secondary="section=='side_screen'"
                              decoration-danger="not pipe_id">
                            <field name="section"/>
                            <field name="name"/>
                            <field name="nos"/>
                            <field name="length"/>
                            <field name="total_length"/>
                            <field name="pipe_id" column_invisible="1"/>
                            <field name="required"/>
                        </tree>
                    </field>
                    
                    <!-- Assignment Action Section -->
                    <div class="alert alert-warning text-center mt-3" role="alert">
                        <h5>ðŸŽ¯ Ready to Assign?</h5>
                        <div class="btn-group mt-2" role="group">
                            <button name="action_assign_pipes" 
                                    string="âœ… Assign Selected Pipe to Components" 
                                    type="object" 
                                    class="btn btn-success btn-lg"/>
                            <button name="action_assign_and_close" 
                                    string="âœ… Assign &amp; Close Window" 
                                    type="object" 
                                    class="btn btn-primary btn-lg"/>
                        </div>
                    </div>
                </sheet>
                
                <footer>
                    <button name="action_assign_and_close" 
                            string="âœ“ Assign Pipes &amp; Close" 
                            type="object" 
                            class="btn-primary"/>
                    <button name="action_assign_pipes" 
                            string="âœ“ Assign Pipes" 
                            type="object" 
                            class="btn-success"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    
    <!-- Action for Bulk Pipe Assignment -->
    <record id="action_bulk_pipe_assignment_wizard" model="ir.actions.act_window">
        <field name="name">Bulk Pipe Assignment</field>
        <field name="res_model">bulk.pipe.assignment.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
</odoo>