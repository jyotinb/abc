<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- CORE SYSTEM SECTIONS - Always update for bug fixes (noupdate="0") -->
    <data noupdate="0">
        
        <!-- Dimensions Section - Core calculations -->
        <record id="section_dimensions" model="greenhouse.section.template">
            <field name="name">Basic Dimensions</field>
            <field name="code">dimensions</field>
            <field name="sequence">5</field>
            <field name="icon">fa-ruler</field>
            <field name="color">1</field>
            <field name="is_mandatory">True</field>
            <field name="requires_pipe">False</field>
            <field name="calculation_rules">[
                {
                    "code": "span_length",
                    "formula": "GET('total_span_length') - GET('width_front_span_coridoor', 0) - GET('width_back_span_coridoor', 0)"
                },
                {
                    "code": "bay_length", 
                    "formula": "GET('total_bay_length') - GET('width_front_bay_coridoor', 0) - GET('width_back_bay_coridoor', 0)"
                },
                {
                    "code": "structure_size",
                    "formula": "(GET('span_length') + GET('width_front_span_coridoor', 0) + GET('width_back_span_coridoor', 0)) * (GET('bay_length') + GET('width_front_bay_coridoor', 0) + GET('width_back_bay_coridoor', 0))"
                },
                {
                    "code": "no_of_spans",
                    "formula": "INT(GET('bay_length') / GET('span_width')) if GET('span_width') > 0 else 0"
                },
                {
                    "code": "no_of_bays",
                    "formula": "INT(GET('span_length') / GET('bay_width')) if GET('bay_width') > 0 else 0"
                },
                {
                    "code": "bottom_height",
                    "formula": "GET('column_height')"
                },
                {
                    "code": "arch_height",
                    "formula": "GET('top_ridge_height') - GET('column_height')"
                },
                {
                    "code": "gutter_length",
                    "formula": "GET('span_length')"
                }
            ]</field>
        </record>
        
    </data>
    
    <!-- USER CUSTOMIZABLE SECTIONS - Preserve user changes (noupdate="1") -->
    <data noupdate="1">
        
        <!-- Dimensions Input Fields - Users can customize defaults -->
        <record id="section_dimensions_inputs" model="greenhouse.section.template">
            <field name="name">Basic Dimensions Inputs</field>
            <field name="code">dimensions_inputs</field>
            <field name="sequence">6</field>
            <field name="icon">fa-ruler</field>
            <field name="color">1</field>
            <field name="is_mandatory">True</field>
            <field name="requires_pipe">False</field>
            <field name="input_fields">[
                {
                    "code": "total_span_length",
                    "label": "Total Span Length (m)",
                    "type": "float",
                    "default": 100,
                    "min": 10,
                    "max": 500,
                    "sequence": 10,
                    "help": "Total length of the greenhouse in span direction"
                },
                {
                    "code": "total_bay_length",
                    "label": "Total Bay Length (m)",
                    "type": "float",
                    "default": 50,
                    "min": 10,
                    "max": 500,
                    "sequence": 20,
                    "help": "Total length of the greenhouse in bay direction"
                },
                {
                    "code": "span_width",
                    "label": "Span Width (m)",
                    "type": "float",
                    "default": 8,
                    "min": 4,
                    "max": 12,
                    "sequence": 30,
                    "help": "Width of each span"
                },
                {
                    "code": "bay_width",
                    "label": "Bay Width (m)",
                    "type": "float",
                    "default": 4,
                    "min": 3,
                    "max": 6,
                    "sequence": 40,
                    "help": "Width of each bay"
                },
                {
                    "code": "plot_size",
                    "label": "Plot Size",
                    "type": "text",
                    "default": "1 Acre",
                    "sequence": 50
                }
            ]</field>
        </record>
        
        <!-- ASC Section -->
        <record id="section_asc" model="greenhouse.section.template">
            <field name="name">ASC (Aerodynamic Side Corridors)</field>
            <field name="code">asc</field>
            <field name="sequence">10</field>
            <field name="icon">fa-arrows-h</field>
            <field name="color">2</field>
            <field name="is_mandatory">False</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "is_side_coridoors",
                    "label": "Enable ASC",
                    "type": "boolean",
                    "default": false,
                    "sequence": 10
                },
                {
                    "code": "width_front_span_coridoor",
                    "label": "Width Front Span ASC (m)",
                    "type": "float",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 20
                },
                {
                    "code": "width_back_span_coridoor",
                    "label": "Width Back Span ASC (m)",
                    "type": "float",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 30
                },
                {
                    "code": "width_front_bay_coridoor",
                    "label": "Width Left Bay ASC (m)",
                    "type": "float",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 40
                },
                {
                    "code": "width_back_bay_coridoor",
                    "label": "Width Right Bay ASC (m)",
                    "type": "float",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 50
                },
                {
                    "code": "support_hockeys",
                    "label": "Support per Hockey",
                    "type": "integer",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 60
                },
                {
                    "code": "length_support_hockeys",
                    "label": "Length for Support Hockey (m)",
                    "type": "float",
                    "default": 1.5,
                    "sequence": 70
                }
            ]</field>
        </record>
        
        <!-- Frame Section -->
        <record id="section_frame" model="greenhouse.section.template">
            <field name="name">Frame Components</field>
            <field name="code">frame</field>
            <field name="sequence">20</field>
            <field name="icon">fa-columns</field>
            <field name="color">3</field>
            <field name="is_mandatory">True</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "column_height",
                    "label": "Column Height (m)",
                    "type": "float",
                    "default": 4.5,
                    "min": 2.0,
                    "max": 10.0,
                    "sequence": 10
                },
                {
                    "code": "top_ridge_height",
                    "label": "Top Ridge Height (m)",
                    "type": "float",
                    "default": 6.5,
                    "min": 3.0,
                    "max": 15.0,
                    "sequence": 20
                },
                {
                    "code": "foundation_length",
                    "label": "Foundation Length (m)",
                    "type": "float",
                    "default": 0.5,
                    "min": 0,
                    "max": 2,
                    "sequence": 30
                },
                {
                    "code": "no_column_big_frame",
                    "label": "No of Big Column per Anchor Frame",
                    "type": "selection",
                    "options": ["0", "1", "2", "3"],
                    "default": "0",
                    "sequence": 40
                },
                {
                    "code": "no_anchor_frame_lines",
                    "label": "Number of Anchor Frame Lines",
                    "type": "integer",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 50
                },
                {
                    "code": "thick_column",
                    "label": "Thick Column Option",
                    "type": "selection",
                    "options": ["0", "1", "2", "3", "4"],
                    "default": "0",
                    "sequence": 60,
                    "options_labels": {
                        "0": "None",
                        "1": "4 Corners",
                        "2": "Both Bay Side",
                        "3": "Both Span Side",
                        "4": "All 4 Side"
                    }
                }
            ]</field>
        </record>
        
        <!-- Truss Section -->
        <record id="section_truss" model="greenhouse.section.template">
            <field name="name">Truss Components</field>
            <field name="code">truss</field>
            <field name="sequence">30</field>
            <field name="icon">fa-sitemap</field>
            <field name="color">4</field>
            <field name="is_mandatory">True</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "big_arch_length",
                    "label": "Big Arch Length (m)",
                    "type": "float",
                    "default": 8.5,
                    "min": 5,
                    "max": 15,
                    "sequence": 10
                },
                {
                    "code": "small_arch_length",
                    "label": "Small Arch Length (m)",
                    "type": "float",
                    "default": 6.5,
                    "min": 4,
                    "max": 12,
                    "sequence": 20
                },
                {
                    "code": "is_bottom_chord",
                    "label": "Is Bottom Chord Required?",
                    "type": "boolean",
                    "default": false,
                    "sequence": 30
                },
                {
                    "code": "v_support_bottom_chord_frame",
                    "label": "V Support Bottom Chord per Frame",
                    "type": "selection",
                    "options": ["0", "2"],
                    "default": "0",
                    "sequence": 40
                },
                {
                    "code": "length_v_support_bottom_chord_frame",
                    "label": "Length for V Support Bottom Chord (m)",
                    "type": "float",
                    "default": 1.5,
                    "sequence": 50
                },
                {
                    "code": "is_arch_support_big",
                    "label": "Is Arch Support Big (Big Arch) Required?",
                    "type": "boolean",
                    "default": false,
                    "sequence": 60
                },
                {
                    "code": "length_arch_support_big",
                    "label": "Length for Arch Support Big (m)",
                    "type": "float",
                    "default": 2.0,
                    "sequence": 70
                },
                {
                    "code": "is_arch_support_big_small",
                    "label": "Is Arch Support Big (Small Arch) Required?",
                    "type": "boolean",
                    "default": false,
                    "sequence": 80
                },
                {
                    "code": "length_arch_support_big_small",
                    "label": "Length for Arch Support Big Small (m)",
                    "type": "float",
                    "default": 2.0,
                    "sequence": 90
                },
                {
                    "code": "is_arch_support_small_big_arch",
                    "label": "Is Arch Support Small for Bigger Arch Required?",
                    "type": "boolean",
                    "default": false,
                    "sequence": 100
                },
                {
                    "code": "length_arch_support_small_big_arch",
                    "label": "Length for Arch Support Small Big (m)",
                    "type": "float",
                    "default": 1.5,
                    "sequence": 110
                },
                {
                    "code": "is_arch_support_small_small_arch",
                    "label": "Is Arch Support Small for Smaller Arch Required?",
                    "type": "boolean",
                    "default": false,
                    "sequence": 120
                },
                {
                    "code": "length_arch_support_small_small_arch",
                    "label": "Length for Arch Support Small Small (m)",
                    "type": "float",
                    "default": 1.5,
                    "sequence": 130
                },
                {
                    "code": "no_vent_big_arch_support_frame",
                    "label": "Vent Support for Big Arch per Frame",
                    "type": "selection",
                    "options": ["0", "1", "2", "3"],
                    "default": "0",
                    "sequence": 140
                },
                {
                    "code": "length_vent_big_arch_support",
                    "label": "Length for Vent Support Big Arch (m)",
                    "type": "float",
                    "default": 2.0,
                    "sequence": 150
                },
                {
                    "code": "no_vent_small_arch_support_frame",
                    "label": "Vent Support for Small Arch per Frame",
                    "type": "selection",
                    "options": ["0", "2"],
                    "default": "0",
                    "sequence": 160
                },
                {
                    "code": "length_vent_small_arch_support",
                    "label": "Length for Vent Support Small Arch (m)",
                    "type": "float",
                    "default": 1.5,
                    "sequence": 170
                },
                {
                    "code": "bay_side_border_purlin",
                    "label": "Bay Side Border Purlin",
                    "type": "selection",
                    "options": ["0", "1", "2"],
                    "default": "0",
                    "sequence": 180
                },
                {
                    "code": "span_side_border_purlin",
                    "label": "Span Side Border Purlin",
                    "type": "selection",
                    "options": ["0", "1", "2"],
                    "default": "0",
                    "sequence": 190
                }
            ]</field>
        </record>
        
        <!-- Side Screen Section -->
        <record id="section_side_screen" model="greenhouse.section.template">
            <field name="name">Side Screen Components</field>
            <field name="code">side_screen</field>
            <field name="sequence">40</field>
            <field name="icon">fa-shield</field>
            <field name="color">5</field>
            <field name="is_mandatory">False</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "side_screen_guard",
                    "label": "Side Screen Guard",
                    "type": "boolean",
                    "default": false,
                    "sequence": 10
                },
                {
                    "code": "length_side_screen_guard",
                    "label": "Length for Side Screen Guard (m)",
                    "type": "float",
                    "default": 1.0,
                    "sequence": 20
                },
                {
                    "code": "side_screen_guard_box",
                    "label": "Side Screen Guard Box",
                    "type": "boolean",
                    "default": false,
                    "sequence": 30
                },
                {
                    "code": "no_side_screen_guard_box",
                    "label": "Number of Side Screen Guard Box",
                    "type": "integer",
                    "default": 0,
                    "min": 0,
                    "max": 20,
                    "sequence": 40
                },
                {
                    "code": "length_side_screen_guard_box_h_pipe",
                    "label": "Length for Side Screen Guard Box H Pipe (m)",
                    "type": "float",
                    "default": 1.0,
                    "sequence": 50
                },
                {
                    "code": "length_side_screen_roll_up_pipe_joiner",
                    "label": "Length for Side Screen Roll Up Pipe Joiner (m)",
                    "type": "float",
                    "default": 0.5,
                    "sequence": 60
                },
                {
                    "code": "no_of_curtains",
                    "label": "No of Curtains",
                    "type": "integer",
                    "default": 0,
                    "min": 0,
                    "max": 20,
                    "sequence": 70
                },
                {
                    "code": "length_side_screen_rollup_handles",
                    "label": "Length for Side Screen Rollup Handles (m)",
                    "type": "float",
                    "default": 1.0,
                    "sequence": 80
                },
                {
                    "code": "length_side_screen_guard_spacer",
                    "label": "Length for Side Screen Guard Spacer (m)",
                    "type": "float",
                    "default": 0.3,
                    "sequence": 90
                }
            ]</field>
        </record>
        
        <!-- Lower Section -->
        <record id="section_lower" model="greenhouse.section.template">
            <field name="name">Lower Section Components</field>
            <field name="code">lower</field>
            <field name="sequence">50</field>
            <field name="icon">fa-level-down</field>
            <field name="color">6</field>
            <field name="is_mandatory">False</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "front_back_c_c_cross_bracing_x",
                    "label": "Front and Back Column to Column Cross bracing X",
                    "type": "boolean",
                    "default": false,
                    "sequence": 10
                },
                {
                    "code": "length_front_back_c_c_cross_bracing_x",
                    "label": "Length for Front Back CC Cross Bracing X (m)",
                    "type": "float",
                    "default": 2.5,
                    "sequence": 20
                },
                {
                    "code": "middle_c_c_cross_bracing_x",
                    "label": "No of Internal Column lines for CC Cross Bracing X",
                    "type": "integer",
                    "default": 0,
                    "min": 0,
                    "max": 10,
                    "sequence": 30
                },
                {
                    "code": "length_middle_c_c_cross_bracing_x",
                    "label": "Length for Internal CC Cross Bracing X (m)",
                    "type": "float",
                    "default": 2.5,
                    "sequence": 40
                },
                {
                    "code": "cross_bracing_column_arch",
                    "label": "Cross Bracing Column to Arch",
                    "type": "boolean",
                    "default": false,
                    "sequence": 50
                },
                {
                    "code": "length_cross_bracing_column_arch",
                    "label": "Length for Cross Bracing Column Arch (m)",
                    "type": "float",
                    "default": 2.0,
                    "sequence": 60
                },
                {
                    "code": "cross_bracing_column_bottom",
                    "label": "Cross Bracing Column to Bottom Chord",
                    "type": "boolean",
                    "default": false,
                    "sequence": 70
                },
                {
                    "code": "length_cross_bracing_column_bottom",
                    "label": "Length for Cross Bracing Column Bottom (m)",
                    "type": "float",
                    "default": 2.0,
                    "sequence": 80
                },
                {
                    "code": "arch_middle_purlin_big_arch",
                    "label": "Arch Middle Purlin Big Arch",
                    "type": "selection",
                    "options": ["0", "1", "2", "3", "4", "5"],
                    "default": "0",
                    "sequence": 90,
                    "options_labels": {
                        "0": "None",
                        "1": "4 Corners",
                        "2": "Front and Back",
                        "3": "Both Sides",
                        "4": "4 Sides",
                        "5": "All"
                    }
                },
                {
                    "code": "arch_middle_purlin_big_arch_pcs",
                    "label": "Arch Middle Purlin Big Arch Pcs",
                    "type": "selection",
                    "options": ["0", "1", "2"],
                    "default": "0",
                    "sequence": 100
                },
                {
                    "code": "arch_middle_purlin_small_arch",
                    "label": "Arch Middle Purlin Small Arch",
                    "type": "selection",
                    "options": ["0", "1", "2", "3", "4", "5"],
                    "default": "0",
                    "sequence": 110,
                    "options_labels": {
                        "0": "None",
                        "1": "4 Corners",
                        "2": "Front and Back",
                        "3": "Both Sides",
                        "4": "4 Side",
                        "5": "All"
                    }
                },
                {
                    "code": "arch_middle_purlin_small_arch_pcs",
                    "label": "Arch Middle Purlin Small Arch Pcs",
                    "type": "selection",
                    "options": ["0", "1", "2"],
                    "default": "0",
                    "sequence": 120
                }
            ]</field>
        </record>
        
        <!-- Gutter Section -->
        <record id="section_gutter" model="greenhouse.section.template">
            <field name="name">Gutter System</field>
            <field name="code">gutter</field>
            <field name="sequence">60</field>
            <field name="icon">fa-tint</field>
            <field name="color">7</field>
            <field name="is_mandatory">False</field>
            <field name="requires_pipe">True</field>
            <field name="input_fields">[
                {
                    "code": "gutter_type",
                    "label": "Gutter Type",
                    "type": "selection",
                    "options": ["none", "ippf", "continuous"],
                    "default": "none",
                    "sequence": 10,
                    "options_labels": {
                        "none": "None",
                        "ippf": "IPPF",
                        "continuous": "Continuous"
                    }
                },
                {
                    "code": "gutter_slope",
                    "label": "Gutter Slope",
                    "type": "selection",
                    "options": ["1", "2"],
                    "default": "1",
                    "sequence": 20
                },
                {
                    "code": "last_span_gutter",
                    "label": "Last Span Gutter",
                    "type": "boolean",
                    "default": false,
                    "sequence": 30
                },
                {
                    "code": "last_span_gutter_length",
                    "label": "Last Span Gutter Length",
                    "type": "integer",
                    "default": 0,
                    "sequence": 40
                },
                {
                    "code": "gutter_ippf_full",
                    "label": "Gutter IPPF Full",
                    "type": "boolean",
                    "default": false,
                    "sequence": 50
                },
                {
                    "code": "gutter_ippf_drainage_extension",
                    "label": "Gutter IPPF Drainage Extension",
                    "type": "boolean",
                    "default": false,
                    "sequence": 60
                },
                {
                    "code": "gutter_funnel_ippf",
                    "label": "Gutter Funnel IPPF",
                    "type": "boolean",
                    "default": false,
                    "sequence": 70
                },
                {
                    "code": "gutter_end_cap",
                    "label": "Gutter End Cap",
                    "type": "boolean",
                    "default": false,
                    "sequence": 80
                },
                {
                    "code": "gutter_extension",
                    "label": "Gutter Extension",
                    "type": "selection",
                    "options": ["0", "2", "4"],
                    "default": "0",
                    "sequence": 90
                }
            ]</field>
        </record>
        
    </data>
</odoo>